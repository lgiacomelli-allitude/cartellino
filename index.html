
<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Calcolo Orario di Lavoro</title>
  <style>
    body {
      font-family: 'calibri', sans-serif;
      background-color: #E5F1F4;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }
    .container {
      background: #fff;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
      max-width: 420px;
      width: 90%;
      text-align: center;
    }
    .logo {
      max-width: 300px;
      margin: 0 auto 0px;
    }
    h2 {
      color: #003F4F;
      margin-bottom: 20px;
    }
    label {
      display: block;
      margin: 15px 0 5px;
      text-align: left;
      color: #333;
      font-weight: 500;
    }
    input[type="time"] {
      width: 100%;
      padding: 8px;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 6px;
      box-sizing: border-box;
    }
    button {
      width: 100%;
      padding: 10px;
      margin-top: 12px;
      background-color: #005D69;
      color: #fff;
      border: none;
      border-radius: 6px;
      font-size: 1rem;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    button:hover {
      background-color: #004851;
    }
    .result {
      margin-top: 20px;
      font-weight: bold;
	  font-size: 20px;
      color: #222;
    }
	.title{
      font-weight: bold;
	  font-size: 40px;
      color: #004851;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="title" >Calcolo Orario di Lavoro</div>
	<div class="result" id="giorno"></div>
    <label for="ingressoMattina">Ingresso Mattina:</label>
    <input type="time" id="ingressoMattina">

    <label for="uscitaPranzo">Uscita Pranzo:</label>
    <input type="time" id="uscitaPranzo">

    <label for="rientroPranzo">Rientro Pranzo:</label>
    <input type="time" id="rientroPranzo" onchange="calcolaUscita()">

    <label for="uscitaSera">Uscita Sera:</label>
    <input type="time" id="uscitaSera">




    <button onclick="calcolaOre()">Calcola Ore Lavorate</button>
    <button onclick="calcolaUscita()">Calcola Orario di Uscita Necessario</button>
    <button onclick="resetCampi()">Reset</button>

    <div class="result" id="output"></div>
  </div>

  <script>
    const giorniSettimana = [
      "Domenica",
      "Lunedì",
      "Martedì",
      "Mercoledì",
      "Giovedì",
      "Venerdì",
      "Sabato"
    ];

    const oggi = new Date();
    const giornoItaliano = giorniSettimana[oggi.getDay()];

    document.getElementById("giorno").innerText = "Oggi è " + giornoItaliano;
  </script>

  <script>
    function parseTime(t) {
      const [h, m] = t.split(":").map(Number);
      return h * 60 + m;
    }

    function formatTime(minutes) {
      const h = Math.floor(minutes / 60);
      const m = minutes % 60;
      return h.toString().padStart(2, '0') + ":" + m.toString().padStart(2, '0');
    }

	function calcoloGiorno(){
	const giorniSettimana = [
	  "Domenica",
	  "Lunedì",
	  "Martedì",
	  "Mercoledì",
	  "Giovedì",
	  "Venerdì",
	  "Sabato"
	];

const oggi = new Date();
const giornoItaliano = giorniSettimana[oggi.getDay()];

return "Oggi è " + giornoItaliano

	}

    function calcolaOre() {
      const inMattina = document.getElementById("ingressoMattina").value;
      const outPranzo = document.getElementById("uscitaPranzo").value;
      const inPausa = document.getElementById("rientroPranzo").value;
      const outSera = document.getElementById("uscitaSera").value;
      //const isVenerdi = document.getElementById("venerdi").checked;
	  const isVenerdiAuto = new Date().getDay() === 5;
      const minutiRichiesti = isVenerdiAuto ? 420 : 450;

      if (!inMattina || !outPranzo || !inPausa || !outSera) {
        document.getElementById("output").innerText = "Inserisci tutti gli orari.";
        return;
      }

      const ingresso = Math.max(parseTime(inMattina), 480); // Forza 8:00 come minimo
      const mattina = parseTime(outPranzo) - ingresso;
      const pomeriggio = parseTime(outSera) - parseTime(inPausa);
      const totale = mattina + pomeriggio;

      const ore = Math.floor(totale / 60);
      const minuti = totale % 60;
      const diff = totale - minutiRichiesti;

      let messaggio = `Hai lavorato ${ore}h ${minuti}m. `;
      if (diff > 0) {
        messaggio += `Hai ${Math.floor(diff / 60)}h ${diff % 60}m in più.`;
      } else if (diff < 0) {
        messaggio += `Ti mancano ${Math.floor(-diff / 60)}h ${-diff % 60}m.`;
      } else {
        messaggio += isVenerdiAuto
          ? "Hai completato esattamente le 7h richieste del venerdì."
          : "Hai completato esattamente le 7h 30m.";
      }

      document.getElementById("output").innerText = messaggio;
    }

    function calcolaUscita() {
      const inMattina = document.getElementById("ingressoMattina").value;
      const outPranzo = document.getElementById("uscitaPranzo").value;
      const inPausa = document.getElementById("rientroPranzo").value;
      // const isVenerdi = document.getElementById("venerdi").checked;
	  const isVenerdiAuto = new Date().getDay() === 5;
      const minutiRichiesti = isVenerdiAuto ? 420 : 450;

      if (!inMattina || !outPranzo || !inPausa) {
        document.getElementById("output").innerText = "Inserisci ingresso mattina, uscita e rientro pranzo.";
        return;
      }

      const ingresso = Math.max(parseTime(inMattina), 480); // Forza 8:00 come minimo
      const mattina = parseTime(outPranzo) - ingresso;
      const tempoRimanente = minutiRichiesti - mattina;
      let uscitaNecessaria = parseTime(inPausa) + tempoRimanente;
	  
      if (uscitaNecessaria < 990) {
        uscitaNecessaria = 990; // minimo 16:30
      }

      document.getElementById("output").innerText =
        `Per completare ${minutiRichiesti / 60}h, devi uscire alle ` + formatTime(uscitaNecessaria);
    }




    function resetCampi() {
      document.getElementById("ingressoMattina").value = "";
      document.getElementById("uscitaPranzo").value = "";
      document.getElementById("rientroPranzo").value = "";
      document.getElementById("uscitaSera").value = "";
      //document.getElementById("venerdi").checked = false;
      document.getElementById("output").innerText = "";
    }
  </script>
</body>
</html>

